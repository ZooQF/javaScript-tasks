<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>form-task-2</title>
    <style>
        .tab_tr_th{
            font-size: medium;
            font-weight: 900;
        }
        .tab_tr_td_txt{
            width: 400px;
            height: 20px;
            border: #c0c0c0 solid 2px;
        }
        .tab_tr_td_txt:hover,.tab_tr_td_txt:active{
            border: #7ecaf0 solid 2px;
        }
        .tab_tr_td_submit{
            width: 80px;
            height: 40px;;
            color: white;
            background-color: #6898c2;
            float: right;
            border: none;
            border-radius: 10px;
        }
        .tip{
            color: #888888;
        }
        #sub_butt{
            cursor: pointer;
        }
    </style>
</head>
<body>
<table class="tab">
    <tbody>
        <tr class="tab_tr">
            <th class="tab_tr_th">名称</th>
            <td class="tab_tr_td">
                <input type="text" class="tab_tr_td_txt" id="name">
            </td>
        </tr>
        <tr class="tab_tr">
            <th class="tab_tr_th"></th>
            <td class="tab_tr_td tip" id="name_tip"></td>
        </tr>

        <tr class="tab_tr">
            <th class="tab_tr_th">密码</th>
            <td class="tab_tr_td">
                <input type="password" class="tab_tr_td_txt" id="password">
            </td>
        </tr>
        <tr class="tab_tr">
            <th class="tab_tr_th"></th>
            <td class="tab_tr_td tip" id="password_tip"></td>
        </tr>

        <tr class="tab_tr">
            <th class="tab_tr_th">密码确认</th>
            <td class="tab_tr_td">
                <input type="password" class="tab_tr_td_txt" id="repass">
            </td>
        </tr>
        <tr class="tab_tr">
            <th class="tab_tr_th"></th>
            <td class="tab_tr_td tip" id="repass_tip"></td>
        </tr>

        <tr class="tab_tr">
            <th class="tab_tr_th">邮箱</th>
            <td class="tab_tr_td">
                <input type="text" class="tab_tr_td_txt" id="email">
            </td>
        </tr>
        <tr class="tab_tr">
            <th class="tab_tr_th"></th>
            <td class="tab_tr_td tip" id="email_tip"></td>
        </tr>

        <tr class="tab_tr">
            <th class="tab_tr_th">手机</th>
            <td class="tab_tr_td">
                <input type="text" class="tab_tr_td_txt" id="phone">
            </td>
        </tr>
        <tr class="tab_tr">
            <th class="tab_tr_th"></th>
            <td class="tab_tr_td tip" id="phone_tip"></td>
        </tr>
    </tbody>
    <tfoot>
        <tr>
            <th></th>
            <td><input type="submit" class="tab_tr_td_submit" value="提交" id="sub_butt"></td>
        </tr>
    </tfoot>
</table>
<script>
    //    获取id
    function $(id_selector) {
        return document.getElementById(id_selector);
    }
    //    获取内容长度
    function getLen(str) {
        var enLen=0,chLen=0;
        for (let ch of str) {
            if (isASCII(ch))
                enLen++;
            else
                chLen++;
        }
        return enLen + chLen * 2;
    }
    //    函数判断字符是否为英文
    function isASCII (c) {
        return c.codePointAt(0) <= 0xFF;
    }
    //    分情况接收tip中应该显示的文字
    function diffTips(inputId,n){
        var tip_content = "";
        var error_content = "";
        var empty_content = "";
        var correct_content = "";
        switch(inputId){
            case "name":
                tip_content = "长度为4-16个字符，1个汉字为2个字符";
                error_content = "名称格式错误";
                empty_content = "名称不能为空";
                correct_content = "名称可用";
                break;
            case "password":
                tip_content = "数字和字母结合，长度为6到20个字符";
                error_content = "密码长度出错";
                empty_content = "密码不能为空";
                correct_content = "密码可用";
                break;
            case "repass":
                tip_content = "再次输入相同密码";
                error_content = "密码输入不一致";
                empty_content = "不能为空";
                correct_content = "密码输入一致";
                break;
            case "email":
                tip_content = "请输入邮箱地址";
                error_content = "邮箱格式错误";
                empty_content = "不能为空";
                correct_content = "邮箱格式正确";
                break;
            case "phone":
                tip_content = "请输入11位手机号码";
                error_content = "手机号码格式错误";
                empty_content = "不能为空";
                correct_content = "手机号码格式正确";
                break;
            default: return false;
        }
        //0为默认提示，1为错误提示，2为内容为空提示，3为正确提示
        var arr = [tip_content,error_content,empty_content,correct_content];
        return arr[n];
    }
    //    默认提示
    function checkFocus(inputId) {
        var inp = $(inputId);
        var tip = $(inputId+"_tip");
        inp.onfocus = function(){
            tip.innerHTML = diffTips(inputId,0);
        }
    }
    //    姓名处提示
    function checkNameBlur() {
        var name=$("name"),
                nameTip=$("name_tip"),
                len=getLen(name.value);
        if (len<1){
            name.style.borderColor="#df0110";
            nameTip.style.color="#df0110";
            nameTip.innerHTML=diffTips("name",2);
            return false;
        }else if (len<4||len>16){
            name.style.borderColor="#df0110";
            nameTip.style.color="#df0110";
            nameTip.innerHTML=diffTips("name",1);
            return false;
        }else {
            name.style.borderColor="#60bb44";
            nameTip.style.color="#60bb44";
            nameTip.innerHTML=diffTips("name",3);
            return true;
        }
    }
    //    密码处提示
    function checkPasswBlur() {
        var password=$("password"),
                passwordTip=$("password_tip"),
                len=getLen(password.value);
        if (len<1){
            password.style.borderColor="#df0110";
            passwordTip.style.color="#df0110";
            passwordTip.innerHTML=diffTips("password",2);
            return false;
        }else if (len<6||len>20){
            password.style.borderColor="#df0110";
            passwordTip.style.color="#df0110";
            passwordTip.innerHTML=diffTips("password",1);
            return false;
        }else {
            password.style.borderColor="#60bb44";
            passwordTip.style.color="#60bb44";
            passwordTip.innerHTML=diffTips("password",3);
            return true;
        }
    }
//    密码确认处提示
    function checkRepassBlur() {
        var repass = $("repass"),
                repassTip = $("repass_tip"),
                len = getLen(repass.value);
        if(len<1){
            repass.style.borderColor = "#df0110";
            repassTip.style.color = "#df0110";
            repassTip.innerHTML = diffTips("repass",2);
            return false;
        }else if(repass.value == $("password").value){
            repass.style.borderColor = "#60bb44";
            repassTip.style.color = "#60bb44";
            repassTip.innerHTML = diffTips("repass",3);
            return true;
        }else{
            repass.style.borderColor = "#df0110";
            repassTip.style.color = "#df0110";
            repassTip.innerHTML = diffTips("repass",1);
            return false;
        }
    }
//    邮箱地址处提示
    function checkEmail(c) {
        var apos=c.indexOf("@");
        var dotpos=c.lastIndexOf(".");
        if (apos<1||dotpos-apos<2){return false;}
        else {return true;}
    }
    function checkEmailBlur() {
        var email=$("email"),
                emailTip=$("email_tip"),
                len=getLen(email.value);
        if (len<1){
            email.style.borderColor = "#df0110";//红色
            emailTip.style.color = "#df0110";
            emailTip.innerHTML = "邮箱不能为空";
            return false;
        }else if(checkEmail(email.value)==true){
            email.style.borderColor = "#60bb44";//绿色
            emailTip.style.color = "#60bb44";
            emailTip.innerHTML = "邮箱格式正确";
            return true;
        }else {
            email.style.borderColor = "#df0110";//红色
            emailTip.style.color = "#df0110";
            emailTip.innerHTML = "邮箱格式错误";
            return false;
        }
    }
//    手机号码处提示
    function checkPhoneBlur(){
        var phone = $("phone"),
                phoneTip = $("phone_tip"),
                len = getLen(phone.value);
        if(len == 0){
            phone.style.borderColor = "#df0110";//红色
            phoneTip.style.color = "#df0110";
            phoneTip.innerHTML = diffTips("phone",2);
            return false;
        }else if(len == 11){
            var myreg = /^(1)\d/;
            if(myreg.test(phone.value)){
                phone.style.borderColor = "#60bb44";//绿色
                phoneTip.style.color = "#60bb44";
                phoneTip.innerHTML = diffTips("phone",3);
                return true;
            }else{
                phone.style.borderColor = "#df0110";//红色
                phoneTip.style.color = "#df0110";
                phoneTip.innerHTML = diffTips("phone",1);
                return false;
            }
        }else{
            phone.style.borderColor = "#df0110";//红色
            phoneTip.style.color = "#df0110";
            phoneTip.innerHTML = diffTips("phone",1);
            return false;
        }

    }
//    提交按钮处操作
    function validateForm(){
        checkNameBlur();
        checkPasswBlur();
        checkRepassBlur();
        checkEmailBlur();
        checkPhoneBlur();
        if(checkNameBlur() && checkPasswBlur() && checkRepassBlur() &&
                checkEmailBlur() && checkPhoneBlur()){
            alert("提交成功！");
        }else{
            alert("输入有误！");
        }
        return false;
    }
    var butt=$("sub_butt");
    butt.onclick=validateForm;

    window.onload=function () {
        checkFocus("name");
        checkFocus("password");
        checkFocus("repass");
        checkFocus("email");
        checkFocus("phone");
        $("name").onblur = checkNameBlur;
        $("password").onblur = checkPasswBlur;
        $("repass").onblur = checkRepassBlur;
        $("email").onblur = checkEmailBlur;
        $("phone").onblur = checkPhoneBlur;
    }
</script>
</body>
</html>